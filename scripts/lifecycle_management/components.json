{
  "defaultTemplateVars": {
    "scope": ".local",
    "tag": "dev"
  },
  "components": [
    {
      "name": "models",
      "rootDir": "src/models",
      "commands": {
        "start": "./scripts/burnup.sh",
        "stop": "./scripts/burndown.sh",
        "install": "cargo install --path .",
        "restart": "./scripts/burndown.sh; ./scripts/burnup.sh",
        "build": "docker build -f Dockerfile{{ scope }} -t tapis/models-api:{{ tag }} .",
        "test": "cargo test"
      }
    },
    {
      "name": "datasets",
      "rootDir": "src/datasets",
      "commands": {
        "start": "./scripts/burnup.sh",
        "stop": "./scripts/burndown.sh",
        "restart": "./scripts/burndown.sh; ./scripts/burnup.sh",
        "build": "docker build -f Dockerfile{{ scope }} -t tapis/datasets-api .",
        "test": "cargo test"
      }
    },
    {
      "name": "inference",
      "rootDir": "src/inference",
      "commands": {
        "start": "./scripts/burnup.sh",
        "stop": "./scripts/burndown.sh",
        "restart": "./scripts/burndown.sh; ./scripts/burnup.sh",
        "build": "docker build -f Dockerfile{{ scope }} -t tapis/inference-api .",
        "test": "cargo test"
      },
      "dependencies": ["nfs", "postgres"]
    },
    {
      "name": "training",
      "rootDir": "src/training",
      "commands": {
        "start": "./scripts/burnup.sh",
        "stop": "./scripts/burndown.sh",
        "restart": "./scripts/burndown.sh; ./scripts/burnup.sh",
        "build": "docker build -f Dockerfile{{ scope }} -t tapis/training-api .",
        "test": "cargo test"
      },
      "dependencies": ["nfs", "postgres"]
    },
    {
      "name": "nfs",
      "rootDir": "src/nfs",
      "commands": {
        "start": "./scripts/burnup.sh",
        "stop": "./scripts/burndown.sh",
        "restart": "./scripts/burndown.sh; ./scripts/burnup.sh"
      }
    },
    {
      "name": "postgres",
      "rootDir": "src/postgres",
      "commands": {
        "start": "./scripts/burnup.sh",
        "stop": "./scripts/burndown.sh",
        "restart": "./scripts/burndown.sh; ./scripts/burnup.sh"
      }
    }
  ]
}